<view class="container">
  <!-- 顶部导航 -->
  <view class="nav-bar">
    <view class="nav-left">
      <text class="nav-title">考研日历</text>
    </view>
    <view class="nav-right">
      <view class="avatar-box">
        <image class="avatar" src="{{userInfo.avatarUrl || '/assets/images/default-avatar.png'}}" mode="aspectFill"></image>
      </view>
      <view class="share-btn" bindtap="onShare">
        <image class="share-icon" src="/assets/icons/share.png"></image>
      </view>
    </view>
  </view>

  <!-- 日历选择器 -->
  <view class="calendar-tabs">
    <view class="tab {{currentView === 'day' ? 'active' : ''}}" bindtap="switchView" data-view="day">日</view>
    <view class="tab {{currentView === 'week' ? 'active' : ''}}" bindtap="switchView" data-view="week">周</view>
    <view class="tab {{currentView === 'month' ? 'active' : ''}}" bindtap="switchView" data-view="month">月</view>
    <view class="tab {{currentView === 'year' ? 'active' : ''}}" bindtap="switchView" data-view="year">年</view>
  </view>

  <!-- 日期选择器 -->
  <scroll-view class="date-scroll" scroll-x enable-flex scroll-into-view="date-{{currentDateIndex}}" scroll-with-animation>
    <view class="date-list">
      <view id="date-{{index}}" class="date-item {{index === currentDateIndex ? 'active' : ''}}" 
            wx:for="{{dates}}" wx:key="index" bindtap="selectDate" data-index="{{index}}">
        <text class="weekday">{{item.weekday}}</text>
        <text class="date">{{item.date}}</text>
      </view>
    </view>
  </scroll-view>

  <!-- 综合运势 -->
  <view class="fortune-overview">
    <view class="score-circle">
      <view class="circle-progress"></view>
      <view class="circle-content">
        <text class="score">{{overallScore}}</text>
        <text class="label">综合分数</text>
      </view>
    </view>
    <view class="fortune-metrics">
      <view class="metric-item">
        <view class="metric-bar">
          <view class="bar-fill" style="height: {{loveScore}}%;"></view>
        </view>
        <text class="metric-value">{{loveScore}}</text>
        <text class="metric-label">爱情</text>
      </view>
      <view class="metric-item">
        <view class="metric-bar">
          <view class="bar-fill" style="height: {{wealthScore}}%;"></view>
        </view>
        <text class="metric-value">{{wealthScore}}</text>
        <text class="metric-label">财富</text>
      </view>
      <view class="metric-item">
        <view class="metric-bar">
          <view class="bar-fill" style="height: {{careerScore}}%;"></view>
        </view>
        <text class="metric-value">{{careerScore}}</text>
        <text class="metric-label">事业</text>
      </view>
      <view class="metric-item">
        <view class="metric-bar">
          <view class="bar-fill" style="height: {{studyScore}}%;"></view>
        </view>
        <text class="metric-value">{{studyScore}}</text>
        <text class="metric-label">学习</text>
      </view>
    </view>
  </view>

  <!-- 运势信息卡片 -->
  <view class="fortune-info">
    <view class="info-row">
      <view class="info-item">
        <text class="info-label">幸运色</text>
        <view class="color-box" style="background: {{luckyColor}}"></view>
        <text class="info-value">{{luckyColorName}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">幸运数字</text>
        <text class="info-value number">{{luckyNumbers}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">幸运食物</text>
        <text class="info-value">{{luckyFood}}</text>
      </view>
    </view>
  </view>

  <!-- 运势描述 -->
  <view class="fortune-detail">
    <text class="detail-text">{{fortuneDescription}}</text>
  </view>

  <!-- 建议和避免 -->
  <view class="suggestions">
    <view class="suggestion-box">
      <text class="suggestion-title">建议</text>
      <text class="suggestion-content">{{suggestions}}</text>
    </view>
    <view class="suggestion-box">
      <text class="suggestion-title">避免</text>
      <text class="suggestion-content">{{avoidance}}</text>
    </view>
  </view>

  <!-- 底部时间信息 -->
  <view class="bottom-info">
    <text class="time">{{currentTime}}</text>
    <text class="phase">{{moonPhase}}</text>
    <text class="more" bindtap="showMore">更多天气 ></text>
  </view>
</view> 